!function(e,i,t,s){t.swipebox=function(o,n){var a={useCSS:!0,initialIndexOnArray:0,hideBarsDelay:3e3,videoMaxWidth:1140,vimeoColor:"CCCCCC",beforeOpen:null,afterClose:null},r=this,l=[],d=o.selector,c=t(d),p=navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i),u=null!==p||i.createTouch!==s||"ontouchstart"in e||"onmsgesturechange"in e||navigator.msMaxTouchPoints,h=!!i.createElementNS&&!!i.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,b=e.innerWidth?e.innerWidth:t(e).width(),x=e.innerHeight?e.innerHeight:t(e).height(),m='<div id="swipebox-overlay">				<div id="swipebox-slider"></div>				<div id="swipebox-caption"></div>				<div id="swipebox-action">					<a id="swipebox-close"></a>					<a id="swipebox-prev"></a>					<a id="swipebox-next"></a>				</div>		</div>';r.settings={},r.init=function(){r.settings=t.extend({},a,n),t.isArray(o)?(l=o,w.target=t(e),w.init(r.settings.initialIndexOnArray)):t(i).on("click",d,function(e){if("slide current"===e.target.parentNode.className)return!1;t.isArray(o)||(w.destroy(),$elem=t(d),w.actions()),l=[];var i,s,n;n||(s="rel",n=t(this).attr(s)),$elem=n&&""!==n&&"nofollow"!==n?c.filter("["+s+'="'+n+'"]'):t(d),$elem.each(function(){var e=null,i=null;t(this).attr("title")&&(e=t(this).attr("title")),t(this).attr("href")&&(i=t(this).attr("href")),l.push({href:i,title:e})}),i=$elem.index(t(this)),e.preventDefault(),e.stopPropagation(),w.target=t(e.target),w.init(i)})},r.refresh=function(){t.isArray(o)||(w.destroy(),$elem=t(d),w.actions())};var w={init:function(e){r.settings.beforeOpen&&r.settings.beforeOpen(),this.target.trigger("swipebox-start"),t.swipebox.isOpen=!0,this.build(),this.openSlide(e),this.openMedia(e),this.preloadMedia(e+1),this.preloadMedia(e-1)},build:function(){var e=this;if(t("body").append(m),e.doCssTrans()&&(t("#swipebox-slider").css({"-webkit-transition":"left 0.4s ease","-moz-transition":"left 0.4s ease","-o-transition":"left 0.4s ease","-khtml-transition":"left 0.4s ease",transition:"left 0.4s ease"}),t("#swipebox-overlay").css({"-webkit-transition":"opacity 1s ease","-moz-transition":"opacity 1s ease","-o-transition":"opacity 1s ease","-khtml-transition":"opacity 1s ease",transition:"opacity 1s ease"}),t("#swipebox-action, #swipebox-caption").css({"-webkit-transition":"0.5s","-moz-transition":"0.5s","-o-transition":"0.5s","-khtml-transition":"0.5s",transition:"0.5s"})),h){var i=t("#swipebox-action #swipebox-close").css("background-image");i=i.replace("png","svg"),t("#swipebox-action #swipebox-prev,#swipebox-action #swipebox-next,#swipebox-action #swipebox-close").css({"background-image":i})}t.each(l,function(){t("#swipebox-slider").append('<div class="slide"></div>')}),e.setDim(),e.actions(),u?e.gesture():e.keyboard(),e.animBars(),e.resize()},setDim:function(){var i,s,o={};"onorientationchange"in e?e.addEventListener("orientationchange",function(){0===e.orientation?(i=b,s=x):(90===e.orientation||-90===e.orientation)&&(i=x,s=b)},!1):(i=e.innerWidth?e.innerWidth:t(e).width(),s=e.innerHeight?e.innerHeight:t(e).height()),o={width:i,height:s},t("#swipebox-overlay").css(o)},resize:function(){var i=this;t(e).resize(function(){i.setDim()}).resize()},supportTransition:function(){for(var e="transition WebkitTransition MozTransition OTransition msTransition KhtmlTransition".split(" "),t=0;t<e.length;t++)if(i.createElement("div").style[e[t]]!==s)return e[t];return!1},doCssTrans:function(){return r.settings.useCSS&&this.supportTransition()?!0:void 0},gesture:function(){var e=this,i=null,s=10,o={},n={},a=t("#swipebox-caption, #swipebox-action");a.addClass("visible-bars"),e.setTimeout(),t("body").bind("touchstart",function(e){return t(this).addClass("touching"),n=e.originalEvent.targetTouches[0],o.pageX=e.originalEvent.targetTouches[0].pageX,t(".touching").bind("touchmove",function(e){e.preventDefault(),e.stopPropagation(),n=e.originalEvent.targetTouches[0]}),!1}).bind("touchend",function(r){r.preventDefault(),r.stopPropagation(),i=n.pageX-o.pageX,i>=s?e.getPrev():-s>=i?e.getNext():a.hasClass("visible-bars")?(e.clearTimeout(),e.hideBars()):(e.showBars(),e.setTimeout()),t(".touching").off("touchmove").removeClass("touching")})},setTimeout:function(){if(r.settings.hideBarsDelay>0){var i=this;i.clearTimeout(),i.timeout=e.setTimeout(function(){i.hideBars()},r.settings.hideBarsDelay)}},clearTimeout:function(){e.clearTimeout(this.timeout),this.timeout=null},showBars:function(){var e=t("#swipebox-caption, #swipebox-action");this.doCssTrans()?e.addClass("visible-bars"):(t("#swipebox-caption").animate({top:0},500),t("#swipebox-action").animate({bottom:0},500),setTimeout(function(){e.addClass("visible-bars")},1e3))},hideBars:function(){var e=t("#swipebox-caption, #swipebox-action");this.doCssTrans()?e.removeClass("visible-bars"):(t("#swipebox-caption").animate({top:"-50px"},500),t("#swipebox-action").animate({bottom:"-50px"},500),setTimeout(function(){e.removeClass("visible-bars")},1e3))},animBars:function(){var e=this,i=t("#swipebox-caption, #swipebox-action");i.addClass("visible-bars"),e.setTimeout(),t("#swipebox-slider").click(function(){i.hasClass("visible-bars")||(e.showBars(),e.setTimeout())}),u||t("#swipebox-action").hover(function(){e.showBars(),i.addClass("visible-bars"),e.clearTimeout()},function(){i.removeClass("visible-bars"),e.setTimeout()})},keyboard:function(){var i=this;t(e).bind("keyup",function(e){e.preventDefault(),e.stopPropagation(),37===e.keyCode?i.getPrev():39===e.keyCode?i.getNext():27===e.keyCode&&i.closeSlide()})},actions:function(){var e=this,i=u?"touchend":"click";l.length<2?t("#swipebox-prev, #swipebox-next").hide():(t("#swipebox-prev").bind(i,function(i){i.preventDefault(),i.stopPropagation(),e.getPrev(),e.setTimeout()}),t("#swipebox-next").bind(i,function(i){i.preventDefault(),i.stopPropagation(),e.getNext(),e.setTimeout()})),t("#swipebox-close").bind(i,function(){e.closeSlide()})},setSlide:function(e,i){i=i||!1;var s=t("#swipebox-slider");this.doCssTrans()?s.css({left:100*-e+"%"}):s.animate({left:100*-e+"%"}),t("#swipebox-slider .slide").removeClass("current"),t("#swipebox-slider .slide").eq(e).addClass("current"),this.setTitle(e),i&&s.fadeIn(),t("#swipebox-prev, #swipebox-next").removeClass("disabled"),0===e?t("#swipebox-prev").addClass("disabled"):e===l.length-1&&t("#swipebox-next").addClass("disabled")},openSlide:function(i){t("html").addClass("swipebox-html"),u&&t("html").addClass("swipebox-touch"),t(e).trigger("resize"),this.setSlide(i,!0)},preloadMedia:function(e){var i=this,t=null;l[e]!==s&&(t=l[e].href),i.isVideo(t)?i.openMedia(e):setTimeout(function(){i.openMedia(e)},1e3)},openMedia:function(e){var i=this,o=null;return l[e]!==s&&(o=l[e].href),0>e||e>=l.length?!1:(i.isVideo(o)?t("#swipebox-slider .slide").eq(e).html(i.getVideo(o)):i.loadMedia(o,function(){t("#swipebox-slider .slide").eq(e).html(this)}),void 0)},setTitle:function(e){var i=null;t("#swipebox-caption").empty(),l[e]!==s&&(i=l[e].title),i&&t("#swipebox-caption").append(i)},isVideo:function(e){return e&&(e.match(/youtube\.com\/watch\?v=([a-zA-Z0-9\-_]+)/)||e.match(/vimeo\.com\/([0-9]*)/)||e.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/))?!0:void 0},getVideo:function(e){var i="",t=e.match(/watch\?v=([a-zA-Z0-9\-_]+)/),s=e.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/),o=e.match(/vimeo\.com\/([0-9]*)/);return t||s?(s&&(t=s),i='<iframe width="560" height="315" src="//www.youtube.com/embed/'+t[1]+'" frameborder="0" allowfullscreen></iframe>'):o&&(i='<iframe width="560" height="315"  src="//player.vimeo.com/video/'+o[1]+"?byline=0&amp;portrait=0&amp;color="+r.settings.vimeoColor+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'),'<div class="swipebox-video-container" style="max-width:'+r.settings.videomaxWidth+'px"><div class="swipebox-video">'+i+"</div></div>"},loadMedia:function(e,i){if(!this.isVideo(e)){var s=t("<img>").on("load",function(){i.call(s)});s.attr("src",e)}},getNext:function(){var e=this;index=t("#swipebox-slider .slide").index(t("#swipebox-slider .slide.current")),index+1<l.length?(index++,e.setSlide(index),e.preloadMedia(index+1)):(t("#swipebox-slider").addClass("rightSpring"),setTimeout(function(){t("#swipebox-slider").removeClass("rightSpring")},500))},getPrev:function(){index=t("#swipebox-slider .slide").index(t("#swipebox-slider .slide.current")),index>0?(index--,this.setSlide(index),this.preloadMedia(index-1)):(t("#swipebox-slider").addClass("leftSpring"),setTimeout(function(){t("#swipebox-slider").removeClass("leftSpring")},500))},closeSlide:function(){t("html").removeClass("swipebox-html"),t("html").removeClass("swipebox-touch"),t(e).trigger("resize"),this.destroy()},destroy:function(){t(e).unbind("keyup"),t("body").unbind("touchstart"),t("body").unbind("touchmove"),t("body").unbind("touchend"),t("#swipebox-slider").unbind(),t("#swipebox-overlay").remove(),t.isArray(o)||o.removeData("_swipebox"),this.target&&this.target.trigger("swipebox-destroy"),t.swipebox.isOpen=!1,r.settings.afterClose&&r.settings.afterClose()}};r.init()},t.fn.swipebox=function(e){if(!t.data(this,"_swipebox")){var i=new t.swipebox(this,e);this.data("_swipebox",i)}return this.data("_swipebox")}}(window,document,jQuery);